# Backend приложения MegaTracker

Megatracker - это приложение, которое позволяет пользователям отслеживать изменения в ценах криптовалют. Оно предоставляет информацию о текущей цене и изменении стоимости за определенный период времени для различных криптовалют.

Пользователи могут:
- Создать аккаунт, управлять данными для входа в аккаунт.
- Отслеживать текущую стоимость более чем 1000 различных криптовалют.
- Искать криптовалюту по названию.
- Применять фильтры к поиску.
- Добавлять понравившуюся криптовалюту в избранное.
- Делать заметки к определенной криптовалюте.

## Список зависимостей проекта

- Spring Boot — набор инструментов и библиотек для создания приложений корпоративного уровня.
- Spring Data — библиотека, которая добавляет дополнительный уровень абстракции поверх ORM реализации JPA.
- Spring Security — фреймворк, предоставляющий механизмы построения систем аутентификации и авторизации.
- Lombok — библиотека для сокращения кода в классах.
- Liquibase — инструмент миграции баз данных.

## Детали реализации

Для механизма аутентификации используются JWT, который работает следующим образом:
1. Пользователь отправляет учетные данные на сервер.
2. Сервер аутентифицирует пользователя и создает JWT-токен (refresh и access). Access токен содержит информацию о пользователе и данные о том, к каким ресурсам у пользователя есть доступ. Refresh токен используется для обновления access токена.
3. Сервер отправляет access токен обратно клиенту в теле ответа. Refresh токен сохраняется в базе данных.
4. Клиент хранит JWT-токен в локальном хранилище.
5. Каждый раз, когда клиент запрашивает доступ к защищенным ресурсам на сервере, он отправляет JWT-токен в заголовке запроса.
6. Сервер проверяет JWT-токен и предоставляет доступ к ресурсам, если токен действителен, в противном случае ищет refresh токен пользователя в базе данных, после чего обновляет access токен.

Для получения актуальных данных о криптовалюте используется внешнее API CryptoCompare. Цена криптовалюты обновляется каждые 5 минут.

## Запуск проекта

1. Клонирование репозитория
```bash
git clone https://github.com/Make-senior-cry/MegaTracker.git
```

2. Вставить в корень проекта файл .env со следующими переменными:  
API_KEY=*Ваше значение*  
JWT_ACCESS_TOKEN_EXPIRED=*Ваше значение*  
JWT_REFRESH_TOKEN_EXPIRED=*Ваше значение*  
JWT_TOKEN_SECRET=*Ваше значение*  
SPRING_DATASOURCE_DATABASE=*Ваше значение*  
SPRING_DATASOURCE_PASSWORD=*Ваше значение*  
SPRING_DATASOURCE_USERNAME=*Ваше значение*  
API_URL=https://min-api.cryptocompare.com/data/  
POSTGRES_LOCAL_PORT=*Ваше значение*  
POSTGRES_DOCKER_PORT=*Ваше значение*  
SPRING_LOCAL_PORT=*Ваше значение*  
SPRING_DOCKER_PORT=*Ваше значение*  

3. Запустить проект локально
